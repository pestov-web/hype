# ĞÑ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ° Ğ¼Ğ°ÑÑˆÑ‚Ğ°Ğ±Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ Hype

## Ğ¦ĞµĞ»ĞµĞ²Ñ‹Ğµ Ğ¿Ğ¾ĞºĞ°Ğ·Ğ°Ñ‚ĞµĞ»Ğ¸

### Ğ­Ñ‚Ğ°Ğ¿Ñ‹ Ñ€Ğ¾ÑÑ‚Ğ°

```
Phase 1 (MVP):           100 Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ĞµĞ¹    / 10 Ğ¾Ğ´Ğ½Ğ¾Ğ²Ñ€ĞµĞ¼ĞµĞ½Ğ½Ñ‹Ñ… Ğ³Ğ¾Ğ»Ğ¾ÑĞ¾Ğ²Ñ‹Ñ…
Phase 2 (Growth):      1,000 Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ĞµĞ¹    / 100 Ğ¾Ğ´Ğ½Ğ¾Ğ²Ñ€ĞµĞ¼ĞµĞ½Ğ½Ñ‹Ñ… Ğ³Ğ¾Ğ»Ğ¾ÑĞ¾Ğ²Ñ‹Ñ…
Phase 3 (Scale):      10,000 Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ĞµĞ¹    / 1,000 Ğ¾Ğ´Ğ½Ğ¾Ğ²Ñ€ĞµĞ¼ĞµĞ½Ğ½Ñ‹Ñ… Ğ³Ğ¾Ğ»Ğ¾ÑĞ¾Ğ²Ñ‹Ñ…
Phase 4 (Massive):   100,000 Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ĞµĞ¹    / 10,000 Ğ¾Ğ´Ğ½Ğ¾Ğ²Ñ€ĞµĞ¼ĞµĞ½Ğ½Ñ‹Ñ… Ğ³Ğ¾Ğ»Ğ¾ÑĞ¾Ğ²Ñ‹Ñ…
Phase 5 (Discord):  1,000,000+ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ĞµĞ¹  / 100,000+ Ğ¾Ğ´Ğ½Ğ¾Ğ²Ñ€ĞµĞ¼ĞµĞ½Ğ½Ñ‹Ñ… Ğ³Ğ¾Ğ»Ğ¾ÑĞ¾Ğ²Ñ‹Ñ…
```

### ĞšÑ€Ğ¸Ñ‚Ğ¸Ñ‡Ğ½Ñ‹Ğµ Ñ‚Ñ€ĞµĞ±Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ Ğ´Ğ»Ñ Ğ³Ğ¾Ğ»Ğ¾ÑĞ¾Ğ²Ğ¾Ğ¹ ÑĞ²ÑĞ·Ğ¸

**Ğ“Ğ¾Ğ»Ğ¾Ñ (Ğ¿Ñ€Ğ¸Ğ¾Ñ€Ğ¸Ñ‚ĞµÑ‚ #1)**:

-   âœ… Ğ—Ğ°Ğ´ĞµÑ€Ğ¶ĞºĞ° < 150ms (ĞºĞ¾Ğ¼Ñ„Ğ¾Ñ€Ñ‚Ğ½Ñ‹Ğ¹ Ñ€Ğ°Ğ·Ğ³Ğ¾Ğ²Ğ¾Ñ€)
-   âœ… 99.9% uptime (Ğ³Ğ¾Ğ»Ğ¾Ñ Ğ½Ğµ Ğ´Ğ¾Ğ»Ğ¶ĞµĞ½ Ğ¿Ğ°Ğ´Ğ°Ñ‚ÑŒ)
-   âœ… ĞŸĞ¾Ğ´Ğ´ĞµÑ€Ğ¶ĞºĞ° 50+ Ñ‡ĞµĞ»Ğ¾Ğ²ĞµĞº Ğ² Ğ¾Ğ´Ğ½Ğ¾Ğ¼ ĞºĞ°Ğ½Ğ°Ğ»Ğµ
-   âœ… ĞĞ¸Ğ·ĞºĞ¾Ğµ Ğ¿Ğ¾Ñ‚Ñ€ĞµĞ±Ğ»ĞµĞ½Ğ¸Ğµ CPU/RAM Ğ½Ğ° ĞºĞ»Ğ¸ĞµĞ½Ñ‚Ğµ

**Ğ¡Ñ‚Ñ€Ğ¸Ğ¼ ÑĞºÑ€Ğ°Ğ½Ğ° (Ğ¿Ñ€Ğ¸Ğ¾Ñ€Ğ¸Ñ‚ĞµÑ‚ #2)**:

-   âœ… 1080p @ 30fps Ğ´Ğ»Ñ Ğ¸Ğ³Ñ€Ğ¾Ğ²Ñ‹Ñ… ÑĞµÑÑĞ¸Ğ¹
-   âœ… ĞĞ´Ğ°Ğ¿Ñ‚Ğ¸Ğ²Ğ½Ñ‹Ğ¹ Ğ±Ğ¸Ñ‚Ñ€ĞµĞ¹Ñ‚ (Ğ¾Ñ‚ 2 Ğ´Ğ¾ 8 Mbps)
-   âœ… ĞœĞ¸Ğ½Ğ¸Ğ¼Ğ°Ğ»ÑŒĞ½Ğ°Ñ Ğ·Ğ°Ğ´ĞµÑ€Ğ¶ĞºĞ° (< 300ms)
-   âœ… Ğ’Ğ¾Ğ·Ğ¼Ğ¾Ğ¶Ğ½Ğ¾ÑÑ‚ÑŒ ÑÑ‚Ñ€Ğ¸Ğ¼Ğ¸Ñ‚ÑŒ Ğ½ĞµÑĞºĞ¾Ğ»ÑŒĞºĞ¸Ğ¼ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑĞ¼

---

## ğŸ“ ĞÑ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ° Ğ¿Ğ¾ Ñ„Ğ°Ğ·Ğ°Ğ¼

### Phase 1: MVP (Ñ‚ĞµĞºÑƒÑ‰Ğ°Ñ P2P â†’ Hybrid)

**Ğ¢ĞµĞºÑƒÑ‰Ğ°Ñ ÑĞ¸Ñ‚ÑƒĞ°Ñ†Ğ¸Ñ**: P2P mesh Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°ĞµÑ‚ Ğ´Ğ¾ 8-10 Ñ‡ĞµĞ»Ğ¾Ğ²ĞµĞº

**Ğ§Ñ‚Ğ¾ Ğ´Ğ¾Ğ±Ğ°Ğ²Ğ¸Ñ‚ÑŒ Ğ¡Ğ•Ğ™Ğ§ĞĞ¡**:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    FRONTEND                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  rtcService (Hybrid mode)                             â”‚  â”‚
â”‚  â”‚  â”œâ”€ P2P mode (2-8 users)                              â”‚  â”‚
â”‚  â”‚  â””â”€ SFU mode (9+ users)                               â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â†•
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    BACKEND (Single Server)                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  Express    â”‚  â”‚  WebSocket   â”‚  â”‚  mediasoup SFU   â”‚   â”‚
â”‚  â”‚  REST API   â”‚  â”‚  Signaling   â”‚  â”‚  (1 worker)      â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  PostgreSQL (messages, users, channels)              â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Ğ—Ğ°Ğ´ĞµĞ» Ğ½Ğ° Ğ±ÑƒĞ´ÑƒÑ‰ĞµĞµ**:

-   âœ… Hybrid Ñ€ĞµĞ¶Ğ¸Ğ¼ (P2P + SFU) - Ğ³Ğ¾Ñ‚Ğ¾Ğ²Ğ½Ğ¾ÑÑ‚ÑŒ Ğº Ñ€Ğ¾ÑÑ‚Ñƒ
-   âœ… ĞšĞ¾Ğ´ ÑƒĞ¶Ğµ Ğ¿Ğ¾Ğ´Ğ´ĞµÑ€Ğ¶Ğ¸Ğ²Ğ°ĞµÑ‚ Ğ¾Ğ±Ğ° Ñ€ĞµĞ¶Ğ¸Ğ¼Ğ°
-   âœ… ĞĞ²Ñ‚Ğ¾Ğ¿ĞµÑ€ĞµĞºĞ»ÑÑ‡ĞµĞ½Ğ¸Ğµ Ğ¿Ğ¾ ĞºĞ¾Ğ»Ğ¸Ñ‡ĞµÑÑ‚Ğ²Ñƒ ÑƒÑ‡Ğ°ÑÑ‚Ğ½Ğ¸ĞºĞ¾Ğ²

**Ğ¡Ñ‚Ğ¾Ğ¸Ğ¼Ğ¾ÑÑ‚ÑŒ**: ~$40-80/Ğ¼ĞµÑÑÑ† (1 VPS ÑĞµÑ€Ğ²ĞµÑ€ 4GB RAM)

---

### Phase 2: Growth (100-1,000 Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ĞµĞ¹)

**ĞŸÑ€Ğ¾Ğ±Ğ»ĞµĞ¼Ñ‹ Phase 1**:

-   âŒ ĞĞ´Ğ¸Ğ½ SFU ÑĞµÑ€Ğ²ĞµÑ€ - single point of failure
-   âŒ Ğ’ÑĞµ ĞºĞ°Ğ½Ğ°Ğ»Ñ‹ Ğ½Ğ° Ğ¾Ğ´Ğ½Ğ¾Ğ¼ ÑĞµÑ€Ğ²ĞµÑ€Ğµ - bottleneck
-   âŒ ĞŸÑ€Ğ¸ Ğ¿Ğ°Ğ´ĞµĞ½Ğ¸Ğ¸ ÑĞµÑ€Ğ²ĞµÑ€Ğ° - Ğ²ÑĞµ Ğ³Ğ¾Ğ»Ğ¾ÑĞ¾Ğ²Ñ‹Ğµ Ğ¿Ğ°Ğ´Ğ°ÑÑ‚

**Ğ ĞµÑˆĞµĞ½Ğ¸Ğµ: Multi-Region SFU Cluster**

```
                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                        â”‚  Load Balancer â”‚
                        â”‚   (Cloudflare) â”‚
                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚
                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                â”‚                â”‚                â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”
        â”‚   SFU Node   â”‚  â”‚  SFU Node  â”‚  â”‚  SFU Node  â”‚
        â”‚  US-East-1   â”‚  â”‚  EU-West   â”‚  â”‚  AP-South  â”‚
        â”‚              â”‚  â”‚            â”‚  â”‚            â”‚
        â”‚ mediasoup    â”‚  â”‚ mediasoup  â”‚  â”‚ mediasoup  â”‚
        â”‚ 8 workers    â”‚  â”‚ 8 workers  â”‚  â”‚ 8 workers  â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â”‚                â”‚                â”‚
                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚
                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”
                        â”‚  Redis Cluster  â”‚
                        â”‚  (coordination) â”‚
                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚
                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”
                        â”‚   PostgreSQL    â”‚
                        â”‚  (Primary DB)   â”‚
                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ĞšĞ»ÑÑ‡ĞµĞ²Ñ‹Ğµ Ğ¸Ğ·Ğ¼ĞµĞ½ĞµĞ½Ğ¸Ñ**:

1. **Ğ Ğ°ÑĞ¿Ñ€ĞµĞ´ĞµĞ»Ñ‘Ğ½Ğ½Ñ‹Ğµ SFU Ğ½Ğ¾Ğ´Ñ‹**:

    ```typescript
    // Backend: Ğ Ğ¾ÑƒÑ‚Ğ¸Ğ½Ğ³ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ĞµĞ¹ Ğ½Ğ° Ğ±Ğ»Ğ¸Ğ¶Ğ°Ğ¹ÑˆĞ¸Ğ¹ SFU
    function selectSFUNode(userLocation: string, channelId: string): string {
        // Ğ’Ñ‹Ğ±Ğ¸Ñ€Ğ°ĞµĞ¼ Ğ½Ğ¾Ğ´Ñƒ Ğ¿Ğ¾ Ğ³ĞµĞ¾Ğ»Ğ¾ĞºĞ°Ñ†Ğ¸Ğ¸ + Ğ½Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞµ
        const nodes = sfuRegistry.getAvailableNodes();
        const closest = nodes.sort((a, b) => calculateLatency(userLocation, a) - calculateLatency(userLocation, b));
        return closest[0].id;
    }
    ```

2. **Redis Ğ´Ğ»Ñ ĞºĞ¾Ğ¾Ñ€Ğ´Ğ¸Ğ½Ğ°Ñ†Ğ¸Ğ¸**:

    ```typescript
    // Ğ¥Ñ€Ğ°Ğ½ĞµĞ½Ğ¸Ğµ ÑĞ¾ÑÑ‚Ğ¾ÑĞ½Ğ¸Ñ ĞºĞ°Ğ½Ğ°Ğ»Ğ¾Ğ² Ğ² Redis
    interface ChannelState {
        channelId: string;
        sfuNodeId: string; // ĞĞ° ĞºĞ°ĞºĞ¾Ğ¼ SFU Ğ½Ğ¾Ğ´Ğµ ÑĞµĞ¹Ñ‡Ğ°Ñ ĞºĞ°Ğ½Ğ°Ğ»
        participants: string[]; // Ğ¡Ğ¿Ğ¸ÑĞ¾Ğº Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ĞµĞ¹
        createdAt: Date;
    }

    // ĞŸÑ€Ğ¸ Ğ¿Ñ€Ğ¸ÑĞ¾ĞµĞ´Ğ¸Ğ½ĞµĞ½Ğ¸Ğ¸ Ğº ĞºĞ°Ğ½Ğ°Ğ»Ñƒ
    const channelState = await redis.get(`channel:${channelId}`);
    if (channelState) {
        // ĞšĞ°Ğ½Ğ°Ğ» ÑƒĞ¶Ğµ ÑÑƒÑ‰ĞµÑÑ‚Ğ²ÑƒĞµÑ‚ Ğ½Ğ° ĞºĞ¾Ğ½ĞºÑ€ĞµÑ‚Ğ½Ğ¾Ğ¹ SFU Ğ½Ğ¾Ğ´Ğµ
        return channelState.sfuNodeId;
    } else {
        // Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‘Ğ¼ ĞºĞ°Ğ½Ğ°Ğ» Ğ½Ğ° Ğ½Ğ°Ğ¸Ğ¼ĞµĞ½ĞµĞµ Ğ·Ğ°Ğ³Ñ€ÑƒĞ¶ĞµĞ½Ğ½Ğ¾Ğ¹ Ğ½Ğ¾Ğ´Ğµ
        const bestNode = await selectBestNode();
        await redis.set(`channel:${channelId}`, { sfuNodeId: bestNode });
        return bestNode;
    }
    ```

3. **Health checks Ğ¸ failover**:
    ```typescript
    // ĞœĞ¾Ğ½Ğ¸Ñ‚Ğ¾Ñ€Ğ¸Ğ½Ğ³ Ğ·Ğ´Ğ¾Ñ€Ğ¾Ğ²ÑŒÑ SFU Ğ½Ğ¾Ğ´
    setInterval(async () => {
        for (const node of sfuNodes) {
            const health = await checkNodeHealth(node);
            if (!health.ok) {
                // ĞŸĞµÑ€ĞµĞºĞ»ÑÑ‡Ğ°ĞµĞ¼ ĞºĞ°Ğ½Ğ°Ğ»Ñ‹ Ğ½Ğ° Ğ´Ñ€ÑƒĞ³ÑƒÑ Ğ½Ğ¾Ğ´Ñƒ
                await migrateChannels(node.id, findHealthyNode());
            }
        }
    }, 10000); // ĞšĞ°Ğ¶Ğ´Ñ‹Ğµ 10 ÑĞµĞºÑƒĞ½Ğ´
    ```

**Ğ¡Ñ‚Ğ¾Ğ¸Ğ¼Ğ¾ÑÑ‚ÑŒ**: ~$200-400/Ğ¼ĞµÑÑÑ†

-   3 SFU Ğ½Ğ¾Ğ´Ñ‹: $150-300/Ğ¼ (Ğ¿Ğ¾ $50-100 ĞºĞ°Ğ¶Ğ´Ğ°Ñ)
-   Redis Cluster: $30-50/Ğ¼ (AWS ElastiCache)
-   PostgreSQL: $20-50/Ğ¼ (managed DB)

---

### Phase 3: Scale (1,000-10,000 Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ĞµĞ¹)

**ĞĞ¾Ğ²Ñ‹Ğµ Ğ¿Ñ€Ğ¾Ğ±Ğ»ĞµĞ¼Ñ‹**:

-   âŒ ĞĞ´Ğ¸Ğ½ PostgreSQL - Ğ¼ĞµĞ´Ğ»ĞµĞ½Ğ½Ñ‹Ğµ Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑÑ‹
-   âŒ WebSocket signaling Ğ½Ğ° Ğ¾Ğ´Ğ½Ğ¾Ğ¼ ÑĞµÑ€Ğ²ĞµÑ€Ğµ
-   âŒ ĞĞµÑ‚ Ğ°Ğ½Ğ°Ğ»Ğ¸Ñ‚Ğ¸ĞºĞ¸ Ğ¸ Ğ¼Ğ¾Ğ½Ğ¸Ñ‚Ğ¾Ñ€Ğ¸Ğ½Ğ³Ğ°

**Ğ ĞµÑˆĞµĞ½Ğ¸Ğµ: ĞœĞ¸ĞºÑ€Ğ¾ÑĞµÑ€Ğ²Ğ¸ÑĞ½Ğ°Ñ Ğ°Ñ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ°**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         API GATEWAY (Kong/Nginx)                         â”‚
â”‚                    Rate limiting, Authentication, Routing                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                        â”‚                        â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Auth Serviceâ”‚        â”‚  Channel Serviceâ”‚     â”‚  Voice Service   â”‚
â”‚  (Node.js)   â”‚        â”‚  (Node.js)      â”‚     â”‚  (SFU Manager)   â”‚
â”‚              â”‚        â”‚                 â”‚     â”‚                  â”‚
â”‚ JWT tokens   â”‚        â”‚ CRUD channels   â”‚     â”‚ Coordinate SFUs  â”‚
â”‚ Users        â”‚        â”‚ Permissions     â”‚     â”‚ Route users      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚                        â”‚                        â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚
                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                â”‚                â”‚                â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ PostgreSQL   â”‚  â”‚   Redis     â”‚  â”‚  Kafka/RabbitMQâ”‚
        â”‚ (Read+Write) â”‚  â”‚  (Cache)    â”‚  â”‚  (Events)      â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                   â”‚
                                          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”
                                          â”‚ Analytics Serviceâ”‚
                                          â”‚  (Metrics)       â”‚
                                          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ĞœĞ¸ĞºÑ€Ğ¾ÑĞµÑ€Ğ²Ğ¸ÑÑ‹**:

1. **Auth Service** (Ğ°Ğ²Ñ‚Ğ¾Ñ€Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ):

    ```typescript
    // ĞÑ‚Ğ´ĞµĞ»ÑŒĞ½Ñ‹Ğ¹ ÑĞµÑ€Ğ²Ğ¸Ñ Ğ´Ğ»Ñ JWT, users, sessions
    POST / auth / register;
    POST / auth / login;
    POST / auth / refresh;
    GET / auth / me;
    ```

2. **Channel Service** (ÑƒĞ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ ĞºĞ°Ğ½Ğ°Ğ»Ğ°Ğ¼Ğ¸):

    ```typescript
    GET    /channels
    POST   /channels
    PUT    /channels/:id
    DELETE /channels/:id
    GET    /channels/:id/members
    ```

3. **Voice Service** (ĞºĞ¾Ğ¾Ñ€Ğ´Ğ¸Ğ½Ğ°Ñ†Ğ¸Ñ Ğ³Ğ¾Ğ»Ğ¾ÑĞ¾Ğ²Ñ‹Ñ…):

    ```typescript
    POST /voice/join/:channelId
    POST /voice/leave/:channelId
    GET  /voice/sfu-node/:channelId  // ĞšĞ°ĞºĞ¾Ğ¹ SFU Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ÑŒ
    ```

4. **Signaling Service** (WebSocket):
    ```typescript
    // ĞÑ‚Ğ´ĞµĞ»ÑŒĞ½Ñ‹Ğµ WebSocket ÑĞµÑ€Ğ²ĞµÑ€Ñ‹ Ñ Ğ±Ğ°Ğ»Ğ°Ğ½ÑĞ¸Ñ€Ğ¾Ğ²ĞºĞ¾Ğ¹
    WS ws://signaling-1.hype.com
    WS ws://signaling-2.hype.com
    WS ws://signaling-3.hype.com
    ```

**Database sharding Ğ¿Ğ¾ guild/server ID**:

```sql
-- User Ğ½Ğ°Ñ…Ğ¾Ğ´Ğ¸Ñ‚ÑÑ Ğ² Guild ID 12345
-- Ğ’ÑĞµ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ Guild 12345 â†’ Shard 1 (PostgreSQL instance 1)
-- Guild 67890 â†’ Shard 2 (PostgreSQL instance 2)

SELECT * FROM messages
WHERE guild_id = 12345
  AND channel_id = 'abc'
ORDER BY created_at DESC
LIMIT 50;
```

**Event-driven architecture (Kafka)**:

```typescript
// Ğ¡ĞµÑ€Ğ²Ğ¸ÑÑ‹ Ğ¾Ğ±Ñ‰Ğ°ÑÑ‚ÑÑ Ñ‡ĞµÑ€ĞµĞ· ÑĞ¾Ğ±Ñ‹Ñ‚Ğ¸Ñ
kafka.publish('user.joined_voice', {
    userId: '123',
    channelId: 'abc',
    timestamp: Date.now(),
});

// Analytics Service ÑĞ»ÑƒÑˆĞ°ĞµÑ‚ ÑĞ¾Ğ±Ñ‹Ñ‚Ğ¸Ñ
kafka.subscribe('user.joined_voice', (event) => {
    metrics.increment('voice.joins');
    analytics.track(event);
});
```

**Ğ¡Ñ‚Ğ¾Ğ¸Ğ¼Ğ¾ÑÑ‚ÑŒ**: ~$1,000-2,000/Ğ¼ĞµÑÑÑ†

-   10+ SFU Ğ½Ğ¾Ğ´Ñ‹: $500-1,000/Ğ¼
-   3 PostgreSQL shards: $200-300/Ğ¼
-   Redis Cluster: $100-150/Ğ¼
-   Kafka: $100-200/Ğ¼
-   Load balancers: $100-200/Ğ¼

---

### Phase 4: Massive Scale (10,000-100,000 Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ĞµĞ¹)

**ĞĞ¾Ğ²Ñ‹Ğµ Ğ¿Ñ€Ğ¾Ğ±Ğ»ĞµĞ¼Ñ‹**:

-   âŒ SFU Ğ²ÑÑ‘ ĞµÑ‰Ñ‘ bottleneck Ğ´Ğ»Ñ Ğ¾Ñ‡ĞµĞ½ÑŒ Ğ±Ğ¾Ğ»ÑŒÑˆĞ¸Ñ… ĞºĞ°Ğ½Ğ°Ğ»Ğ¾Ğ²
-   âŒ Ğ¡Ğ»Ğ¸ÑˆĞºĞ¾Ğ¼ Ğ¼Ğ½Ğ¾Ğ³Ğ¾ ÑĞ¾ĞµĞ´Ğ¸Ğ½ĞµĞ½Ğ¸Ğ¹ Ğ½Ğ° SFU
-   âŒ Ğ¡Ñ‚Ñ€Ğ¸Ğ¼ĞµÑ€Ñ‹ Ñ 1000+ Ğ·Ñ€Ğ¸Ñ‚ĞµĞ»ÑĞ¼Ğ¸

**Ğ ĞµÑˆĞµĞ½Ğ¸Ğµ: Cascade SFU + CDN Ğ´Ğ»Ñ ÑÑ‚Ñ€Ğ¸Ğ¼Ğ¾Ğ²**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   LARGE VOICE CHANNEL                        â”‚
â”‚                   (100+ participants)                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚                     â”‚
      â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”
      â”‚  SFU Edge 1  â”‚      â”‚  SFU Edge 2  â”‚
      â”‚  (25 users)  â”‚      â”‚  (25 users)  â”‚
      â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚                     â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                  â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”
                  â”‚  SFU Core   â”‚
                  â”‚ (Aggregator)â”‚
                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Cascade SFU Ğ°Ñ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ°**:

```typescript
// Ğ”Ğ»Ñ Ğ±Ğ¾Ğ»ÑŒÑˆĞ¸Ñ… ĞºĞ°Ğ½Ğ°Ğ»Ğ¾Ğ² (50+ Ñ‡ĞµĞ»Ğ¾Ğ²ĞµĞº)
// 1. Core SFU Ğ¿Ğ¾Ğ»ÑƒÑ‡Ğ°ĞµÑ‚ ÑÑ‚Ñ€Ğ¸Ğ¼Ñ‹ Ğ¾Ñ‚ ÑĞ¿Ğ¸ĞºĞµÑ€Ğ¾Ğ²
// 2. Edge SFU Ğ¿Ğ¾Ğ»ÑƒÑ‡Ğ°ÑÑ‚ ÑÑ‚Ñ€Ğ¸Ğ¼Ñ‹ Ğ¾Ñ‚ Core
// 3. ĞŸĞ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ğ¸ Ğ¿Ğ¾Ğ´ĞºĞ»ÑÑ‡Ğ°ÑÑ‚ÑÑ Ğº Edge (Ğ½Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞ° Ñ€Ğ°ÑĞ¿Ñ€ĞµĞ´ĞµĞ»ĞµĞ½Ğ°)

class CascadeSFU {
    async joinLargeChannel(channelId: string, userId: string) {
        const participantCount = await getChannelParticipantCount(channelId);

        if (participantCount < 50) {
            // ĞĞ±Ñ‹Ñ‡Ğ½Ñ‹Ğ¹ SFU
            return await sfuService.joinChannel(channelId, userId);
        } else {
            // Cascade mode
            const coreNode = await getCoreNodeForChannel(channelId);
            const edgeNode = await selectEdgeNode(coreNode, userId);

            // Ğ¡Ğ¿Ğ¸ĞºĞµÑ€Ñ‹ Ğ¿Ğ¾Ğ´ĞºĞ»ÑÑ‡Ğ°ÑÑ‚ÑÑ Ğº Core
            if (await isActiveSpeaker(userId)) {
                return await connectToCore(coreNode, userId);
            } else {
                // Ğ¡Ğ»ÑƒÑˆĞ°Ñ‚ĞµĞ»Ğ¸ Ğº Edge
                return await connectToEdge(edgeNode, userId);
            }
        }
    }
}
```

**CDN Ğ´Ğ»Ñ ÑÑ‚Ñ€Ğ¸Ğ¼Ğ¾Ğ² ÑĞºÑ€Ğ°Ğ½Ğ°**:

```typescript
// Ğ˜Ğ³Ñ€Ğ¾Ğ²Ğ¾Ğ¹ ÑÑ‚Ñ€Ğ¸Ğ¼ Ñ 1000+ Ğ·Ñ€Ğ¸Ñ‚ĞµĞ»ĞµĞ¹
// ĞĞµ SFU, Ğ° RTMP â†’ CDN â†’ HLS

class StreamService {
    async startGameStream(userId: string, channelId: string) {
        // 1. Ğ¡Ñ‚Ñ€Ğ¸Ğ¼ĞµÑ€ Ğ¾Ñ‚Ğ¿Ñ€Ğ°Ğ²Ğ»ÑĞµÑ‚ RTMP Ğ½Ğ° ingest server
        const rtmpUrl = await getIngestUrl(userId);

        // 2. Transcoding Ğ² Ñ€Ğ°Ğ·Ğ½Ñ‹Ğµ ĞºĞ°Ñ‡ĞµÑÑ‚Ğ²Ğ°
        // Original: 1080p@60fps, 8 Mbps
        // High:     1080p@30fps, 4 Mbps
        // Medium:    720p@30fps, 2 Mbps
        // Low:       480p@30fps, 1 Mbps

        // 3. Ğ Ğ°ÑĞ¿Ñ€Ğ¾ÑÑ‚Ñ€Ğ°Ğ½ĞµĞ½Ğ¸Ğµ Ñ‡ĞµÑ€ĞµĞ· CDN (Cloudflare Stream, AWS CloudFront)
        const hlsUrl = await transcodeToHLS(rtmpUrl, [
            { resolution: '1080p', fps: 60, bitrate: '8M' },
            { resolution: '1080p', fps: 30, bitrate: '4M' },
            { resolution: '720p', fps: 30, bitrate: '2M' },
            { resolution: '480p', fps: 30, bitrate: '1M' },
        ]);

        // 4. Ğ—Ñ€Ğ¸Ñ‚ĞµĞ»Ğ¸ ÑĞ¼Ğ¾Ñ‚Ñ€ÑÑ‚ Ñ‡ĞµÑ€ĞµĞ· HLS (adaptive bitrate)
        return { hlsUrl, rtmpUrl };
    }
}
```

**Ğ¡Ñ‚Ğ¾Ğ¸Ğ¼Ğ¾ÑÑ‚ÑŒ**: ~$5,000-10,000/Ğ¼ĞµÑÑÑ†

-   50+ SFU Ğ½Ğ¾Ğ´Ñ‹: $2,500-5,000/Ğ¼
-   CDN Ğ´Ğ»Ñ ÑÑ‚Ñ€Ğ¸Ğ¼Ğ¾Ğ²: $1,000-2,000/Ğ¼ (transfer costs)
-   Database clusters: $1,000-1,500/Ğ¼
-   Infrastructure: $500-1,500/Ğ¼

---

## ğŸ› ï¸ Ğ¢ĞµÑ…Ğ½Ğ¸Ñ‡ĞµÑĞºĞ¸Ğ¹ ÑÑ‚ĞµĞº (Ñ„Ğ¸Ğ½Ğ°Ğ»ÑŒĞ½Ğ°Ñ Ğ²ĞµÑ€ÑĞ¸Ñ)

### Backend Services

```yaml
# API Gateway
gateway:
    - Kong / Nginx / Traefik
    - Rate limiting
    - Authentication
    - Load balancing

# ĞœĞ¸ĞºÑ€Ğ¾ÑĞµÑ€Ğ²Ğ¸ÑÑ‹
services:
    auth:
        tech: Node.js + TypeScript
        database: PostgreSQL
        cache: Redis

    channels:
        tech: Node.js + TypeScript
        database: PostgreSQL (sharded)
        cache: Redis

    voice:
        tech: Node.js + mediasoup
        coordination: Redis
        monitoring: Prometheus

    signaling:
        tech: Node.js + WebSocket
        scaling: Socket.io with Redis adapter

    streaming:
        tech: FFmpeg + RTMP
        cdn: Cloudflare Stream / AWS CloudFront
        storage: S3 for recordings

# Ğ”Ğ°Ğ½Ğ½Ñ‹Ğµ
databases:
    primary: PostgreSQL 15+ (sharded by guild_id)
    cache: Redis Cluster
    analytics: ClickHouse / TimescaleDB
    search: Elasticsearch (Ğ´Ğ»Ñ Ğ¿Ğ¾Ğ¸ÑĞºĞ° ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ğ¹)

# Messaging
queue:
    - Kafka / RabbitMQ
    - Event-driven communication
    - Async tasks (emails, notifications)

# Monitoring
observability:
    metrics: Prometheus + Grafana
    logging: ELK Stack (Elasticsearch, Logstash, Kibana)
    tracing: Jaeger / OpenTelemetry
    alerts: PagerDuty / Opsgenie
```

### SFU Infrastructure

```yaml
# mediasoup cluster
sfu_nodes:
    regions:
        - us-east-1 # US East Coast
        - us-west-1 # US West Coast
        - eu-west-1 # EU Ireland
        - eu-central-1 # EU Frankfurt
        - ap-south-1 # Asia Pacific Singapore
        - ap-northeast-1 # Asia Pacific Tokyo

    specs:
        cpu: 8+ cores
        ram: 16GB+
        network: 1 Gbps+

    software:
        - mediasoup 3.x
        - Node.js 20+
        - Redis client
        - Health check agent

# Cascade architecture (Ğ´Ğ»Ñ Ğ±Ğ¾Ğ»ÑŒÑˆĞ¸Ñ… ĞºĞ°Ğ½Ğ°Ğ»Ğ¾Ğ²)
cascade:
    core_nodes: 5-10 (Ğ¼Ğ¾Ñ‰Ğ½Ñ‹Ğµ ÑĞµÑ€Ğ²ĞµÑ€Ñ‹)
    edge_nodes: 50-100 (Ğ»ĞµĞ³ĞºĞ¾Ğ²ĞµÑĞ½Ñ‹Ğµ)
    max_users_per_edge: 50
```

---

## ğŸ“Š ĞœĞµÑ‚Ñ€Ğ¸ĞºĞ¸ Ğ¸ Ğ¼Ğ¾Ğ½Ğ¸Ñ‚Ğ¾Ñ€Ğ¸Ğ½Ğ³

### ĞšĞ»ÑÑ‡ĞµĞ²Ñ‹Ğµ Ğ¼ĞµÑ‚Ñ€Ğ¸ĞºĞ¸ Ğ³Ğ¾Ğ»Ğ¾ÑĞ°

```typescript
// Prometheus metrics
interface VoiceMetrics {
    // ĞšĞ°Ñ‡ĞµÑÑ‚Ğ²Ğ¾ ÑĞ¾ĞµĞ´Ğ¸Ğ½ĞµĞ½Ğ¸Ñ
    voice_latency_ms: Histogram; // <150ms target
    voice_packet_loss_percent: Gauge; // <1% target
    voice_jitter_ms: Histogram; // <30ms target

    // ĞĞ°Ğ³Ñ€ÑƒĞ·ĞºĞ°
    active_voice_channels: Gauge;
    active_voice_users: Gauge;
    voice_bitrate_mbps: Gauge;

    // SFU
    sfu_node_cpu_percent: Gauge;
    sfu_node_memory_percent: Gauge;
    sfu_node_connections: Gauge;
    sfu_node_health: Gauge; // 0 or 1

    // Ğ‘Ğ¸Ğ·Ğ½ĞµÑ Ğ¼ĞµÑ‚Ñ€Ğ¸ĞºĞ¸
    voice_joins_per_minute: Counter;
    voice_avg_session_duration_minutes: Histogram;
    voice_errors_per_minute: Counter;
}

// Grafana Dashboard
// - Latency chart (P50, P95, P99)
// - Active users timeline
// - SFU load heatmap
// - Error rate alert (>1% = critical)
```

### Alerting rules

```yaml
# Prometheus alerts
alerts:
    - name: HighVoiceLatency
      expr: histogram_quantile(0.95, voice_latency_ms) > 200
      for: 5m
      severity: warning

    - name: SFUNodeDown
      expr: sfu_node_health == 0
      for: 1m
      severity: critical
      action: auto_migrate_channels

    - name: HighPacketLoss
      expr: voice_packet_loss_percent > 5
      for: 2m
      severity: critical

    - name: TooManyErrors
      expr: rate(voice_errors_per_minute[5m]) > 10
      for: 5m
      severity: warning
```

---

## ğŸš€ ĞŸĞ»Ğ°Ğ½ Ğ²Ğ½ĞµĞ´Ñ€ĞµĞ½Ğ¸Ñ (Ğ¿Ğ¾ÑÑ‚Ğ°Ğ¿Ğ½Ñ‹Ğ¹)

### Ğ­Ñ‚Ğ°Ğ¿ 1: Ğ¤ÑƒĞ½Ğ´Ğ°Ğ¼ĞµĞ½Ñ‚ (2-3 Ğ½ĞµĞ´ĞµĞ»Ğ¸)

**Ğ¦ĞµĞ»ÑŒ**: ĞŸĞ¾Ğ´Ğ³Ğ¾Ñ‚Ğ¾Ğ²Ğ¸Ñ‚ÑŒ ĞºĞ¾Ğ´ Ğº Ğ¼Ğ°ÑÑˆÑ‚Ğ°Ğ±Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ

```typescript
// 1. Ğ ĞµÑ„Ğ°ĞºÑ‚Ğ¾Ñ€Ğ¸Ğ½Ğ³ rtcService â†’ Ğ¿Ğ¾Ğ´Ğ´ĞµÑ€Ğ¶ĞºĞ° Ğ½ĞµÑĞºĞ¾Ğ»ÑŒĞºĞ¸Ñ… SFU
interface SFUNode {
    id: string;
    region: string;
    url: string;
    maxConnections: number;
    currentLoad: number;
}

class RTCService {
    private currentSFUNode?: SFUNode;

    async joinVoiceChannel(channelId: string, userId: string) {
        // Ğ—Ğ°Ğ¿Ñ€Ğ¾Ñ Ñƒ backend: ĞºĞ°ĞºĞ¾Ğ¹ SFU Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ÑŒ?
        const sfuNode = await this.selectSFUNode(channelId);
        this.currentSFUNode = sfuNode;

        // ĞŸĞ¾Ğ´ĞºĞ»ÑÑ‡ĞµĞ½Ğ¸Ğµ Ğº ĞºĞ¾Ğ½ĞºÑ€ĞµÑ‚Ğ½Ğ¾Ğ¼Ñƒ SFU
        await sfuService.connect(sfuNode.url);
        await sfuService.joinChannel(channelId, userId);
    }

    private async selectSFUNode(channelId: string): Promise<SFUNode> {
        // Backend API: GET /voice/sfu-node/:channelId
        const response = await apiClient.get(`/voice/sfu-node/${channelId}`);
        return response.data.sfuNode;
    }
}
```

```typescript
// 2. Backend: Voice Service (Ğ¿Ñ€Ğ¾ÑÑ‚Ğ¾Ğ¹ Ñ€Ğ¾ÑƒÑ‚Ğ¸Ğ½Ğ³)
class VoiceService {
    private sfuNodes: SFUNode[] = [
        { id: 'sfu-1', region: 'us-east', url: 'wss://sfu1.hype.com', ... },
        // ĞŸĞ¾ĞºĞ° Ğ¾Ğ´Ğ¸Ğ½, Ğ½Ğ¾ ĞºĞ¾Ğ´ Ğ³Ğ¾Ñ‚Ğ¾Ğ² Ğ´Ğ»Ñ Ğ½ĞµÑĞºĞ¾Ğ»ÑŒĞºĞ¸Ñ…
    ];

    async selectSFUNode(channelId: string): Promise<SFUNode> {
        // Phase 1: Round-robin
        // Phase 2: ĞŸĞ¾ Ğ½Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞµ
        // Phase 3: ĞŸĞ¾ Ğ³ĞµĞ¾Ğ»Ğ¾ĞºĞ°Ñ†Ğ¸Ğ¸ + Ğ½Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞµ
        return this.sfuNodes[0];
    }
}
```

```typescript
// 3. Environment config
interface AppConfig {
    mode: 'development' | 'production';
    voice: {
        architecture: 'p2p' | 'sfu' | 'auto';
        sfuNodes: SFUNode[];
        maxUsersPerChannel: number;
    };
}
```

**Ğ ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚**: ĞšĞ¾Ğ´ Ğ³Ğ¾Ñ‚Ğ¾Ğ² Ğº Ğ´Ğ¾Ğ±Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ñ Ğ½Ğ¾Ğ²Ñ‹Ñ… SFU Ğ½Ğ¾Ğ´ Ğ±ĞµĞ· Ğ¸Ğ·Ğ¼ĞµĞ½ĞµĞ½Ğ¸Ğ¹

---

### Ğ­Ñ‚Ğ°Ğ¿ 2: Multi-SFU (1-2 Ğ½ĞµĞ´ĞµĞ»Ğ¸)

**Ğ¦ĞµĞ»ÑŒ**: ĞĞµÑĞºĞ¾Ğ»ÑŒĞºĞ¾ SFU Ğ½Ğ¾Ğ´ + Redis ĞºĞ¾Ğ¾Ñ€Ğ´Ğ¸Ğ½Ğ°Ñ†Ğ¸Ñ

```bash
# Ğ Ğ°Ğ·Ğ²ĞµÑ€Ğ½ÑƒÑ‚ÑŒ 2-3 SFU Ğ½Ğ¾Ğ´Ñ‹
docker-compose up -d sfu-1 sfu-2 sfu-3
```

```yaml
# docker-compose.yml
version: '3.8'
services:
    sfu-1:
        build: ./sfu
        environment:
            - NODE_ID=sfu-1
            - REDIS_URL=redis://redis:6379
            - ANNOUNCED_IP=104.18.1.1
        ports:
            - '40000-49999:40000-49999/udp'

    sfu-2:
        build: ./sfu
        environment:
            - NODE_ID=sfu-2
            - REDIS_URL=redis://redis:6379
            - ANNOUNCED_IP=104.18.1.2
        ports:
            - '50000-59999:50000-59999/udp'

    redis:
        image: redis:7-alpine
        ports:
            - '6379:6379'
```

```typescript
// Backend: ĞšĞ¾Ğ¾Ñ€Ğ´Ğ¸Ğ½Ğ°Ñ†Ğ¸Ñ Ñ‡ĞµÑ€ĞµĞ· Redis
class VoiceCoordinator {
    async assignChannel(channelId: string): Promise<SFUNode> {
        // ĞŸÑ€Ğ¾Ğ²ĞµÑ€ÑĞµĞ¼ ĞµÑÑ‚ÑŒ Ğ»Ğ¸ ĞºĞ°Ğ½Ğ°Ğ» ÑƒĞ¶Ğµ Ğ½Ğ° ĞºĞ°ĞºĞ¾Ğ¹-Ñ‚Ğ¾ Ğ½Ğ¾Ğ´Ğµ
        const existing = await redis.get(`channel:${channelId}`);
        if (existing) {
            return JSON.parse(existing);
        }

        // Ğ’Ñ‹Ğ±Ğ¸Ñ€Ğ°ĞµĞ¼ Ğ½Ğ°Ğ¸Ğ¼ĞµĞ½ĞµĞµ Ğ·Ğ°Ğ³Ñ€ÑƒĞ¶ĞµĞ½Ğ½ÑƒÑ Ğ½Ğ¾Ğ´Ñƒ
        const nodes = await this.getHealthyNodes();
        const bestNode = nodes.sort((a, b) => a.load - b.load)[0];

        // Ğ¡Ğ¾Ñ…Ñ€Ğ°Ğ½ÑĞµĞ¼ Ğ¼Ğ°Ğ¿Ğ¿Ğ¸Ğ½Ğ³
        await redis.set(`channel:${channelId}`, JSON.stringify(bestNode));
        await redis.expire(`channel:${channelId}`, 3600); // 1 Ñ‡Ğ°Ñ TTL

        return bestNode;
    }

    async getHealthyNodes(): Promise<SFUNode[]> {
        const keys = await redis.keys('sfu:health:*');
        const nodes = [];

        for (const key of keys) {
            const health = await redis.get(key);
            if (health && JSON.parse(health).status === 'healthy') {
                nodes.push(JSON.parse(health));
            }
        }

        return nodes;
    }
}
```

**Ğ ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚**: ĞšĞ°Ğ½Ğ°Ğ»Ñ‹ Ñ€Ğ°ÑĞ¿Ñ€ĞµĞ´ĞµĞ»ÑÑÑ‚ÑÑ Ğ¿Ğ¾ Ğ½ĞµÑĞºĞ¾Ğ»ÑŒĞºĞ¸Ğ¼ SFU, Ğ¾Ñ‚ĞºĞ°Ğ·Ğ¾ÑƒÑÑ‚Ğ¾Ğ¹Ñ‡Ğ¸Ğ²Ğ¾ÑÑ‚ÑŒ

---

### Ğ­Ñ‚Ğ°Ğ¿ 3: ĞœĞ¸ĞºÑ€Ğ¾ÑĞµÑ€Ğ²Ğ¸ÑÑ‹ (2-3 Ğ½ĞµĞ´ĞµĞ»Ğ¸)

**Ğ¦ĞµĞ»ÑŒ**: Ğ Ğ°Ğ·Ğ´ĞµĞ»Ğ¸Ñ‚ÑŒ Ğ¼Ğ¾Ğ½Ğ¾Ğ»Ğ¸Ñ‚ Ğ½Ğ° ÑĞµÑ€Ğ²Ğ¸ÑÑ‹

```
backend/
â”œâ”€â”€ services/
â”‚   â”œâ”€â”€ auth/           # ĞÑ‚Ğ´ĞµĞ»ÑŒĞ½Ñ‹Ğ¹ ÑĞµÑ€Ğ²Ğ¸Ñ
â”‚   â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ package.json
â”‚   â”‚   â””â”€â”€ Dockerfile
â”‚   â”œâ”€â”€ channels/       # ĞÑ‚Ğ´ĞµĞ»ÑŒĞ½Ñ‹Ğ¹ ÑĞµÑ€Ğ²Ğ¸Ñ
â”‚   â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ package.json
â”‚   â”‚   â””â”€â”€ Dockerfile
â”‚   â”œâ”€â”€ voice/          # ĞšĞ¾Ğ¾Ñ€Ğ´Ğ¸Ğ½Ğ°Ñ‚Ğ¾Ñ€ SFU
â”‚   â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ package.json
â”‚   â”‚   â””â”€â”€ Dockerfile
â”‚   â””â”€â”€ signaling/      # WebSocket ĞºĞ»Ğ°ÑÑ‚ĞµÑ€
â”‚       â”œâ”€â”€ src/
â”‚       â”œâ”€â”€ package.json
â”‚       â””â”€â”€ Dockerfile
â”œâ”€â”€ gateway/            # API Gateway (Kong)
â”‚   â””â”€â”€ kong.yml
â””â”€â”€ docker-compose.yml
```

```yaml
# docker-compose.yml (production)
services:
    gateway:
        image: kong:3.5
        environment:
            - KONG_DATABASE=postgres
        ports:
            - '8000:8000' # API
            - '8443:8443' # API SSL

    auth-service:
        build: ./services/auth
        environment:
            - DATABASE_URL=postgresql://...
            - REDIS_URL=redis://...
        replicas: 3 # ĞĞ²Ñ‚Ğ¾Ğ¼Ğ°ÑÑˆÑ‚Ğ°Ğ±Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ

    voice-service:
        build: ./services/voice
        environment:
            - REDIS_URL=redis://...
            - SFU_NODES=sfu-1,sfu-2,sfu-3
        replicas: 2

    # ... Ğ´Ñ€ÑƒĞ³Ğ¸Ğµ ÑĞµÑ€Ğ²Ğ¸ÑÑ‹
```

**Ğ ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚**: ĞĞµĞ·Ğ°Ğ²Ğ¸ÑĞ¸Ğ¼Ğ¾Ğµ Ğ¼Ğ°ÑÑˆÑ‚Ğ°Ğ±Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ ĞºĞ°Ğ¶Ğ´Ğ¾Ğ³Ğ¾ ÑĞµÑ€Ğ²Ğ¸ÑĞ°

---

### Ğ­Ñ‚Ğ°Ğ¿ 4: CDN Ğ´Ğ»Ñ ÑÑ‚Ñ€Ğ¸Ğ¼Ğ¾Ğ² (1 Ğ½ĞµĞ´ĞµĞ»Ñ)

**Ğ¦ĞµĞ»ÑŒ**: ĞŸĞ¾Ğ´Ğ´ĞµÑ€Ğ¶ĞºĞ° ÑÑ‚Ñ€Ğ¸Ğ¼Ğ¾Ğ² Ñ 100+ Ğ·Ñ€Ğ¸Ñ‚ĞµĞ»ÑĞ¼Ğ¸

```typescript
// Frontend: Ğ Ğ°Ğ·Ğ½Ñ‹Ğµ Ğ¿ÑƒÑ‚Ğ¸ Ğ´Ğ»Ñ Ğ³Ğ¾Ğ»Ğ¾ÑĞ° Ğ¸ ÑÑ‚Ñ€Ğ¸Ğ¼Ğ°
if (isGameStream && viewerCount > 100) {
    // HLS ÑÑ‚Ñ€Ğ¸Ğ¼ Ñ‡ĞµÑ€ĞµĞ· CDN
    const hlsUrl = await streamingService.getStreamUrl(channelId);
    player.loadSource(hlsUrl);
} else {
    // WebRTC Ğ´Ğ»Ñ Ğ¸Ğ½Ñ‚ĞµÑ€Ğ°ĞºÑ‚Ğ¸Ğ²Ğ° (Ğ³Ğ¾Ğ»Ğ¾Ñ + Ğ¼Ğ°Ğ»Ñ‹Ğµ ÑÑ‚Ñ€Ğ¸Ğ¼Ñ‹)
    await rtcService.joinVoiceChannel(channelId);
}
```

```typescript
// Backend: RTMP ingest + transcode
class StreamingService {
    async startStream(userId: string, channelId: string) {
        // 1. Ğ“ĞµĞ½ĞµÑ€Ğ¸Ñ€ÑƒĞµĞ¼ RTMP URL Ğ´Ğ»Ñ OBS/ÑÑ‚Ñ€Ğ¸Ğ¼ĞµÑ€Ğ°
        const rtmpUrl = `rtmp://ingest.hype.com/live/${generateStreamKey(userId)}`;

        // 2. FFmpeg Ñ‚Ñ€Ğ°Ğ½ÑĞºĞ¾Ğ´Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ
        const ffmpeg = spawn('ffmpeg', [
            '-i',
            rtmpUrl,
            '-c:v',
            'libx264',
            '-preset',
            'veryfast',
            '-b:v',
            '4M',
            '-maxrate',
            '4M',
            '-bufsize',
            '8M',
            '-vf',
            'scale=1920:1080',
            '-g',
            '60',
            '-c:a',
            'aac',
            '-b:a',
            '128k',
            '-f',
            'hls',
            '-hls_time',
            '2',
            '-hls_list_size',
            '5',
            '-hls_flags',
            'delete_segments',
            `/var/www/hls/${userId}/playlist.m3u8`,
        ]);

        // 3. Upload HLS segments to CDN (S3 + CloudFront)
        watchHLSSegments(`/var/www/hls/${userId}/`, async (segment) => {
            await s3.upload(segment, `streams/${userId}/`);
            await invalidateCloudFrontCache(segment);
        });

        // 4. Return CDN URL
        return {
            rtmpUrl,
            hlsUrl: `https://cdn.hype.com/streams/${userId}/playlist.m3u8`,
        };
    }
}
```

**Ğ ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚**: Ğ¡Ñ‚Ñ€Ğ¸Ğ¼Ñ‹ Ğ¼Ğ°ÑÑˆÑ‚Ğ°Ğ±Ğ¸Ñ€ÑƒÑÑ‚ÑÑ Ğ½ĞµĞ·Ğ°Ğ²Ğ¸ÑĞ¸Ğ¼Ğ¾ Ğ¾Ñ‚ Ğ³Ğ¾Ğ»Ğ¾ÑĞ°

---

## ğŸ’° ĞŸÑ€Ğ¾Ğ³Ğ½Ğ¾Ğ· ÑÑ‚Ğ¾Ğ¸Ğ¼Ğ¾ÑÑ‚Ğ¸ Ğ¿Ğ¾ Ñ„Ğ°Ğ·Ğ°Ğ¼

| Phase                 | Users      | Concurrent Voice | Monthly Cost     | Notes                        |
| --------------------- | ---------- | ---------------- | ---------------- | ---------------------------- |
| **Phase 1 (MVP)**     | 100        | 10-20            | $50-100          | 1 VPS (Hybrid P2P+SFU)       |
| **Phase 2 (Growth)**  | 1,000      | 100-200          | $300-500         | Multi-region SFU (3 nodes)   |
| **Phase 3 (Scale)**   | 10,000     | 1,000-2,000      | $1,500-3,000     | ĞœĞ¸ĞºÑ€Ğ¾ÑĞµÑ€Ğ²Ğ¸ÑÑ‹ + 10 SFU        |
| **Phase 4 (Massive)** | 100,000    | 10,000+          | $8,000-15,000    | Cascade SFU + CDN + Sharding |
| **Phase 5 (Discord)** | 1,000,000+ | 100,000+         | $50,000-150,000+ | Enterprise infrastructure    |

---

## ğŸ¯ Ğ§Ñ‚Ğ¾ Ğ´ĞµĞ»Ğ°Ñ‚ÑŒ Ğ¡Ğ•Ğ™Ğ§ĞĞ¡ (Ğ¿Ñ€Ğ¸Ğ¾Ñ€Ğ¸Ñ‚ĞµÑ‚Ñ‹)

### âœ… Must have (Ğ´ĞµĞ»Ğ°ĞµĞ¼ Ğ¿Ñ€ÑĞ¼Ğ¾ ÑĞµĞ¹Ñ‡Ğ°Ñ)

1. **Hybrid P2P + SFU** â† Ğ’Ğ« Ğ¢Ğ£Ğ¢

    ```bash
    # Ğ£ÑÑ‚Ğ°Ğ½Ğ¾Ğ²Ğ¸Ñ‚ÑŒ mediasoup
    cd backend && pnpm add mediasoup
    cd frontend && pnpm add mediasoup-client
    ```

2. **Config-driven architecture**

    ```typescript
    // config/voice.config.ts
    export const voiceConfig = {
        mode: process.env.VOICE_MODE || 'auto',
        p2pMaxUsers: 8,
        sfuNodes: process.env.SFU_NODES?.split(',') || ['localhost:3000'],
    };
    ```

3. **Database schema Ğ´Ğ»Ñ Ğ¼Ğ°ÑÑˆÑ‚Ğ°Ğ±Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ**

    ```sql
    -- Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ¸Ñ‚ÑŒ guild_id Ğ´Ğ»Ñ sharding Ğ² Ğ±ÑƒĞ´ÑƒÑ‰ĞµĞ¼
    ALTER TABLE channels ADD COLUMN guild_id UUID;
    ALTER TABLE messages ADD COLUMN guild_id UUID;

    -- Ğ˜Ğ½Ğ´ĞµĞºÑÑ‹ Ğ´Ğ»Ñ Ğ±Ñ‹ÑÑ‚Ñ€Ñ‹Ñ… Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑĞ¾Ğ²
    CREATE INDEX idx_channels_guild ON channels(guild_id);
    CREATE INDEX idx_messages_channel_created
      ON messages(channel_id, created_at DESC);
    ```

### ğŸ¨ Should have (ÑĞ»ĞµĞ´ÑƒÑÑ‰Ğ¸Ğµ 2-4 Ğ½ĞµĞ´ĞµĞ»Ğ¸)

4. **Health checks Ğ´Ğ»Ñ SFU**
5. **Prometheus metrics**
6. **Redis Ğ´Ğ»Ñ ĞºĞ¾Ğ¾Ñ€Ğ´Ğ¸Ğ½Ğ°Ñ†Ğ¸Ğ¸**

### ğŸš€ Nice to have (Ñ‡ĞµÑ€ĞµĞ· 1-2 Ğ¼ĞµÑÑÑ†Ğ°)

7. **Multi-region SFU**
8. **ĞœĞ¸ĞºÑ€Ğ¾ÑĞµÑ€Ğ²Ğ¸ÑÑ‹**
9. **CDN Ğ´Ğ»Ñ ÑÑ‚Ñ€Ğ¸Ğ¼Ğ¾Ğ²**

---

## ğŸ“š Ğ ĞµĞºĞ¾Ğ¼ĞµĞ½Ğ´Ğ°Ñ†Ğ¸Ğ¸

### Ğ¢ĞµÑ…Ğ½Ğ¾Ğ»Ğ¾Ğ³Ğ¸Ğ¸

**Ğ¢Ğ¾Ñ‡Ğ½Ğ¾ Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞµĞ¼**:

-   âœ… mediasoup (SFU) - Ğ»ÑƒÑ‡ÑˆĞ¸Ğ¹ Ğ²Ñ‹Ğ±Ğ¾Ñ€ Ğ´Ğ»Ñ Ğ³Ğ¾Ğ»Ğ¾ÑĞ°
-   âœ… Redis - ĞºĞ¾Ğ¾Ñ€Ğ´Ğ¸Ğ½Ğ°Ñ†Ğ¸Ñ Ğ¸ ĞºĞµÑˆ
-   âœ… PostgreSQL - primary database
-   âœ… Docker + docker-compose - Ğ´ĞµĞ¿Ğ»Ğ¾Ğ¹

**Ğ Ğ°ÑÑĞ¼Ğ¾Ñ‚Ñ€Ğ¸Ğ¼ Ğ¿Ğ¾Ğ·Ğ¶Ğµ**:

-   Kubernetes (ĞºĞ¾Ğ³Ğ´Ğ° > 10 ÑĞµÑ€Ğ²Ğ¸ÑĞ¾Ğ²)
-   Kafka (ĞºĞ¾Ğ³Ğ´Ğ° > 100k events/sec)
-   Cassandra (ĞºĞ¾Ğ³Ğ´Ğ° PostgreSQL Ğ½Ğµ ÑĞ¿Ñ€Ğ°Ğ²Ğ»ÑĞµÑ‚ÑÑ)
-   Elasticsearch (Ğ´Ğ»Ñ Ğ¿Ğ¾Ğ¸ÑĞºĞ° Ğ¿Ğ¾ Ğ¸ÑÑ‚Ğ¾Ñ€Ğ¸Ğ¸)

### ĞšĞ¾Ğ¼Ğ°Ğ½Ğ´Ğ°

**Phase 1-2** (MVP â†’ Growth): 2-3 Ñ‡ĞµĞ»Ğ¾Ğ²ĞµĞºĞ°

-   1 Backend (Node.js + mediasoup)
-   1 Frontend (React + WebRTC)
-   1 DevOps (part-time)

**Phase 3** (Scale): 4-6 Ñ‡ĞµĞ»Ğ¾Ğ²ĞµĞº

-   2 Backend
-   1 Frontend
-   1 DevOps (full-time)
-   1 QA

**Phase 4+** (Massive): 10+ Ñ‡ĞµĞ»Ğ¾Ğ²ĞµĞº

-   Backend team (3-4)
-   Frontend team (2-3)
-   DevOps team (2-3)
-   SRE (1-2)
-   QA (1-2)

---

## ğŸ¬ Ğ—Ğ°ĞºĞ»ÑÑ‡ĞµĞ½Ğ¸Ğµ

### ĞšĞ»ÑÑ‡ĞµĞ²Ñ‹Ğµ Ğ¿Ñ€Ğ¸Ğ½Ñ†Ğ¸Ğ¿Ñ‹ Ğ¼Ğ°ÑÑˆÑ‚Ğ°Ğ±Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ:

1. **Start simple, plan for scale** â† Ğ’Ñ‹ Ğ¿Ñ€Ğ°Ğ²Ğ¸Ğ»ÑŒĞ½Ğ¾ Ğ´ÑƒĞ¼Ğ°ĞµÑ‚Ğµ!
2. **Measure everything** - Ğ±ĞµĞ· Ğ¼ĞµÑ‚Ñ€Ğ¸Ğº Ğ½ĞµĞ²Ğ¾Ğ·Ğ¼Ğ¾Ğ¶Ğ½Ğ¾ Ğ¾Ğ¿Ñ‚Ğ¸Ğ¼Ğ¸Ğ·Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ
3. **Fail gracefully** - ÑĞ¸ÑÑ‚ĞµĞ¼Ğ° Ğ´Ğ¾Ğ»Ğ¶Ğ½Ğ° Ğ´ĞµĞ³Ñ€Ğ°Ğ´Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ğ¿Ğ¾ÑÑ‚ĞµĞ¿ĞµĞ½Ğ½Ğ¾
4. **Automate operations** - Ñ€ÑƒÑ‡Ğ½Ğ¾Ğ¹ Ñ‚Ñ€ÑƒĞ´ Ğ½Ğµ Ğ¼Ğ°ÑÑˆÑ‚Ğ°Ğ±Ğ¸Ñ€ÑƒĞµÑ‚ÑÑ
5. **Cost-conscious** - Ğ½Ğµ Ğ¿ĞµÑ€ĞµĞ¿Ğ»Ğ°Ñ‡Ğ¸Ğ²Ğ°Ğ¹Ñ‚Ğµ Ñ€Ğ°Ğ½ÑŒÑˆĞµ Ğ²Ñ€ĞµĞ¼ĞµĞ½Ğ¸

### Ğ’Ğ°ÑˆĞ° Ñ‚Ñ€Ğ°ĞµĞºÑ‚Ğ¾Ñ€Ğ¸Ñ:

```
Ğ¡ĞµĞ¹Ñ‡Ğ°Ñ:  P2P (8 users)
         â†“
1 Ğ¼ĞµÑÑÑ†: Hybrid (P2P + 1 SFU) â† Ğ¡Ğ›Ğ•Ğ”Ğ£Ğ®Ğ©Ğ˜Ğ™ Ğ¨ĞĞ“
         â†“
3 Ğ¼ĞµÑÑÑ†Ğ°: Multi-SFU (3-5 nodes)
         â†“
6 Ğ¼ĞµÑÑÑ†ĞµĞ²: ĞœĞ¸ĞºÑ€Ğ¾ÑĞµÑ€Ğ²Ğ¸ÑÑ‹ + 10 SFU
         â†“
1 Ğ³Ğ¾Ğ´:   Cascade SFU + CDN
         â†“
2 Ğ³Ğ¾Ğ´Ğ°:  Discord-scale infrastructure
```

**Ğ’Ğ°ÑˆĞµ Ğ¿Ñ€ĞµĞ¸Ğ¼ÑƒÑ‰ĞµÑÑ‚Ğ²Ğ¾**: Ğ—Ğ°ĞºĞ»Ğ°Ğ´Ñ‹Ğ²Ğ°ĞµÑ‚Ğµ Ğ¿Ñ€Ğ°Ğ²Ğ¸Ğ»ÑŒĞ½ÑƒÑ Ğ°Ñ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ñƒ Ğ¡Ğ•Ğ™Ğ§ĞĞ¡, ĞºĞ¾Ğ³Ğ´Ğ° ÑÑ‚Ğ¾ Ğ´Ñ‘ÑˆĞµĞ²Ğ¾ Ğ¼ĞµĞ½ÑÑ‚ÑŒ. Discord Ğ´ĞµĞ»Ğ°Ğ» ÑÑ‚Ğ¾ Ğ³Ğ¾Ğ´Ğ°Ğ¼Ğ¸ Ğ¼ĞµÑ‚Ğ¾Ğ´Ğ¾Ğ¼ Ğ¿Ñ€Ğ¾Ğ± Ğ¸ Ğ¾ÑˆĞ¸Ğ±Ğ¾Ğº.

**Ğ¡Ğ»ĞµĞ´ÑƒÑÑ‰Ğ¸Ğ¹ PR**: Hybrid mode (P2P + SFU) Ñ Ğ°Ğ²Ñ‚Ğ¾Ğ¿ĞµÑ€ĞµĞºĞ»ÑÑ‡ĞµĞ½Ğ¸ĞµĞ¼ ğŸš€
